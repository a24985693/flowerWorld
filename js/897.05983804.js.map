{"version":3,"file":"js/897.05983804.js","mappings":"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","sources":["webpack://final-hw/./src/stores/articleStore.js","webpack://final-hw/./src/stores/toastStore.js","webpack://final-hw/./src/components/PageNavigation.vue","webpack://final-hw/./src/components/PageNavigation.vue?402b","webpack://final-hw/./src/views/frontend/UserArticles.vue","webpack://final-hw/./src/views/frontend/UserArticles.vue?1f9a"],"sourcesContent":["import { defineStore } from 'pinia';\nimport axios from 'axios';\nimport router from '@/router';\nimport toastStore from './toastStore';\n\nconst toast = toastStore();\n\nexport default defineStore('article', {\n  state: () => ({\n    pagination: {},\n    article: {},\n    articles: {},\n    isLoading: false,\n  }),\n  actions: {\n    // 取得單一文章\n    getArticle(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/article/${id}`;\n\n      axios.get(url)\n        .then((res) => {\n          this.isLoading = false;\n          this.article = res.data.article;\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '文章取得失敗',\n          });\n        });\n    },\n    // 取得文章列表\n    getArticles(page = 1) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/articles?page=${page}`;\n\n      axios.get(url)\n        .then((res) => {\n          this.articles = res.data.articles;\n          this.pagination = res.data.pagination;\n          this.articles.forEach((item, i) => {\n            this.getContent(item, i);\n          });\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '文章取得失敗',\n          });\n        });\n    },\n    // 取得文章的content\n    getContent(item, i) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/article/${item.id}`;\n\n      axios.get(url)\n        .then((res) => {\n          this.isLoading = false;\n          this.articles[i].content = res.data.article.content;\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '文章取得失敗',\n          });\n        });\n    },\n    // 到指定文章頁\n    gotoArticle(id) {\n      router.push(`/article/${id}`);\n    },\n  },\n});\n","import { defineStore } from 'pinia';\n\nexport default defineStore('toast', {\n  state: () => ({\n    messages: [],\n  }),\n  actions: {\n    pushMessage(data) {\n      const { style, title, content } = data;\n      this.messages.push({ style, title, content });\n    },\n    clearMessage() {\n      this.messages = [];\n    },\n  },\n});\n","<template>\n  <nav aria-label=\"Page navigation example\">\n    <ul class=\"pagination justify-content-center\">\n      <li class=\"page-item\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Previous\"\n          @click.prevent=\"updatePage(pagination.current_page-1)\"\n          :class=\"{ 'disabled': pagination.current_page === 1 }\">\n          <span aria-hidden=\"true\">&laquo;</span>\n        </a>\n      </li>\n      <li class=\"page-item\" v-for=\"page in pagination.total_pages\" :key=\"page\"\n        :class=\"{ 'active': page === pagination.current_page }\">\n        <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a>\n      </li>\n      <li class=\"page-item\">\n        <a class=\"page-link\" href=\"#\" aria-label=\"Next\"\n          @click.prevent=\"updatePage(pagination.current_page+1)\"\n          :class=\"{ 'disabled': pagination.current_page === pagination.total_pages }\" >\n          <span aria-hidden=\"true\">&raquo;</span>\n        </a>\n      </li>\n    </ul>\n  </nav>\n</template>\n\n<script>\nexport default {\n  props: {\n    pagination: {},\n  },\n  methods: {\n    updatePage(page) {\n      this.$emit('update-page', page);\n      window.scrollTo(0, 0);\n    },\n  },\n};\n</script>\n","import { render } from \"./PageNavigation.vue?vue&type=template&id=5cd90808\"\nimport script from \"./PageNavigation.vue?vue&type=script&lang=js\"\nexport * from \"./PageNavigation.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <LoadingSpinner :active=\"isLoading\"/>\n  <section class=\"page-title\">\n    <h2>最新消息</h2>\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb d-flex justify-content-center\">\n        <li class=\"breadcrumb-item\">\n          <router-link to=\"/\" class=\"text-decoration-none text-light\">\n            首頁\n          </router-link>\n        </li>\n        <li class=\"breadcrumb-item active\">\n          最新消息\n        </li>\n      </ol>\n    </nav>\n  </section>\n  <div class=\"container articles\">\n    <div class=\"row justify-content-center cursor-pointer g-4 py-5\"\n      :class=\"{ 'list-border': i+1 !== articles.length }\"\n      v-for=\"(item, i) in articles\" :key=\"item.id\"\n      @click=\"gotoArticle(item.id)\"\n      @keydown=\"gotoArticle(item.id)\">\n      <div class=\"col-md-4\">\n        <img :src=\"item.image\" alt=\"文章圖片\"\n          class=\"w-100 h-100 object-fit-cover\">\n      </div>\n      <div class=\"col-md-8 articles-body\">\n        <div class=\"d-flex flex-column h-100\">\n          <h3 class=\"fs-5\">{{ item.title }}</h3>\n          <p class=\"mb-2\">\n            <small class=\"text-muted\">#{{ item.tag }}</small>\n          </p>\n          <p class=\"content mb-3\">\n            {{ item.content }}\n          </p>\n          <div class=\"see-more fs-14 mt-auto ms-auto mb-0\">\n            查看更多\n            <i class=\"fa-solid fa-caret-right\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n    <PageNavigation :pagination=\"pagination\"\n      @update-page=\"getArticles\"/>\n  </div>\n</template>\n\n<script>\nimport PageNavigation from '@/components/PageNavigation.vue';\nimport articleStore from '@/stores/articleStore';\nimport { mapState, mapActions } from 'pinia';\n\nexport default {\n  components: {\n    PageNavigation,\n  },\n  computed: {\n    ...mapState(articleStore, ['articles', 'pagination', 'isLoading']),\n  },\n  methods: {\n    ...mapActions(articleStore, ['getArticles', 'gotoArticle']),\n  },\n  created() {\n    this.getArticles();\n  },\n};\n</script>\n","import { render } from \"./UserArticles.vue?vue&type=template&id=2392d622\"\nimport script from \"./UserArticles.vue?vue&type=script&lang=js\"\nexport * from \"./UserArticles.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["toast","toastStore","defineStore","state","pagination","article","articles","isLoading","actions","getArticle","id","this","url","axios","get","then","res","data","catch","pushMessage","style","title","getArticles","page","forEach","item","i","getContent","content","gotoArticle","router","push","messages","clearMessage","class","_createElementVNode","_hoisted_4","_hoisted_8","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_normalizeClass","$props","current_page","href","onClick","_cache","_withModifiers","$event","$options","updatePage","_hoisted_5","_Fragment","_renderList","total_pages","key","_hoisted_6","_hoisted_7","_hoisted_9","props","methods","$emit","window","scrollTo","__exports__","render","_createTextVNode","_createVNode","_component_LoadingSpinner","active","_ctx","_component_router_link","to","default","_withCtx","_","length","onKeydown","src","image","alt","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_toDisplayString","_hoisted_14","_hoisted_15","tag","_hoisted_16","_hoisted_17","_component_PageNavigation","onUpdatePage","components","PageNavigation","computed","mapState","articleStore","mapActions","created"],"sourceRoot":""}