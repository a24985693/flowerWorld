"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[897],{5747:function(t,e,a){a(4114);var i=a(4445),s=a(1250),n=a(9325),c=a(9040);const l=(0,c.A)();e.A=(0,i.nY)("article",{state:()=>({pagination:{},article:{},articles:{},isLoading:!1}),actions:{getArticle(t){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/cms67/article/${t}`;s.A.get(e).then((t=>{this.isLoading=!1,this.article=t.data.article})).catch((()=>{this.isLoading=!1,l.pushMessage({style:"danger",title:"文章取得失敗"})}))},getArticles(t=1){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/cms67/articles?page=${t}`;s.A.get(e).then((t=>{this.articles=t.data.articles,this.pagination=t.data.pagination,this.articles.forEach(((t,e)=>{this.getContent(t,e)}))})).catch((()=>{this.isLoading=!1,l.pushMessage({style:"danger",title:"文章取得失敗"})}))},getContent(t,e){const a=`https://vue3-course-api.hexschool.io/api/cms67/article/${t.id}`;s.A.get(a).then((t=>{this.isLoading=!1,this.articles[e].content=t.data.article.content})).catch((()=>{this.isLoading=!1,l.pushMessage({style:"danger",title:"文章取得失敗"})}))},gotoArticle(t){n.A.push(`/article/${t}`)}}})},9040:function(t,e,a){a(4114);var i=a(4445);e.A=(0,i.nY)("toast",{state:()=>({messages:[]}),actions:{pushMessage(t){const{style:e,title:a,content:i}=t;this.messages.push({style:e,title:a,content:i})},clearMessage(){this.messages=[]}}})},9060:function(t,e,a){a.d(e,{A:function(){return f}});var i=a(641),s=a(33),n=a(3751);const c={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center"},o={class:"page-item"},r=(0,i.Lk)("span",{"aria-hidden":"true"},"«",-1),g=[r],p=["onClick"],u={class:"page-item"},d=(0,i.Lk)("span",{"aria-hidden":"true"},"»",-1),h=[d];function k(t,e,a,r,d,k){return(0,i.uX)(),(0,i.CE)("nav",c,[(0,i.Lk)("ul",l,[(0,i.Lk)("li",o,[(0,i.Lk)("a",{class:(0,s.C4)(["page-link",{disabled:1===a.pagination.current_page}]),href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,n.D$)((t=>k.updatePage(a.pagination.current_page-1)),["prevent"]))},g,2)]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.pagination.total_pages,(t=>((0,i.uX)(),(0,i.CE)("li",{class:(0,s.C4)(["page-item",{active:t===a.pagination.current_page}]),key:t},[(0,i.Lk)("a",{class:"page-link",href:"#",onClick:(0,n.D$)((e=>k.updatePage(t)),["prevent"])},(0,s.v_)(t),9,p)],2)))),128)),(0,i.Lk)("li",u,[(0,i.Lk)("a",{class:(0,s.C4)(["page-link",{disabled:a.pagination.current_page===a.pagination.total_pages}]),href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,n.D$)((t=>k.updatePage(a.pagination.current_page+1)),["prevent"]))},h,2)])])])}var L={props:{pagination:{}},methods:{updatePage(t){this.$emit("update-page",t),window.scrollTo(0,0)}}},v=a(6262);const m=(0,v.A)(L,[["render",k]]);var f=m},5897:function(t,e,a){a.r(e),a.d(e,{default:function(){return E}});var i=a(641),s=a(33);const n={class:"page-title"},c=(0,i.Lk)("h2",null,"最新消息",-1),l={"aria-label":"breadcrumb"},o={class:"breadcrumb d-flex justify-content-center"},r={class:"breadcrumb-item"},g=(0,i.Lk)("li",{class:"breadcrumb-item active"}," 最新消息 ",-1),p={class:"container articles"},u=["onClick","onKeydown"],d={class:"col-md-4"},h=["src"],k={class:"col-md-8 articles-body"},L={class:"d-flex flex-column h-100"},v={class:"fs-5"},m={class:"mb-2"},f={class:"text-muted"},b={class:"content mb-3"},A=(0,i.Lk)("div",{class:"see-more fs-14 mt-auto ms-auto mb-0"},[(0,i.eW)(" 查看更多 "),(0,i.Lk)("i",{class:"fa-solid fa-caret-right"})],-1);function C(t,e,a,C,y,_){const x=(0,i.g2)("LoadingSpinner"),w=(0,i.g2)("router-link"),P=(0,i.g2)("PageNavigation");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(x,{active:t.isLoading},null,8,["active"]),(0,i.Lk)("section",n,[c,(0,i.Lk)("nav",l,[(0,i.Lk)("ol",o,[(0,i.Lk)("li",r,[(0,i.bF)(w,{to:"/",class:"text-decoration-none text-light"},{default:(0,i.k6)((()=>[(0,i.eW)(" 首頁 ")])),_:1})]),g])])]),(0,i.Lk)("div",p,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.articles,((e,a)=>((0,i.uX)(),(0,i.CE)("div",{class:(0,s.C4)(["row justify-content-center cursor-pointer g-4 py-5",{"list-border":a+1!==t.articles.length}]),key:e.id,onClick:a=>t.gotoArticle(e.id),onKeydown:a=>t.gotoArticle(e.id)},[(0,i.Lk)("div",d,[(0,i.Lk)("img",{src:e.image,alt:"文章圖片",class:"w-100 h-100 object-fit-cover"},null,8,h)]),(0,i.Lk)("div",k,[(0,i.Lk)("div",L,[(0,i.Lk)("h3",v,(0,s.v_)(e.title),1),(0,i.Lk)("p",m,[(0,i.Lk)("small",f,"#"+(0,s.v_)(e.tag),1)]),(0,i.Lk)("p",b,(0,s.v_)(e.content),1),A])])],42,u)))),128)),(0,i.bF)(P,{pagination:t.pagination,onUpdatePage:t.getArticles},null,8,["pagination","onUpdatePage"])])],64)}var y=a(9060),_=a(5747),x=a(4445),w={components:{PageNavigation:y.A},computed:{...(0,x.aH)(_.A,["articles","pagination","isLoading"])},methods:{...(0,x.i0)(_.A,["getArticles","gotoArticle"])},created(){this.getArticles()}},P=a(6262);const $=(0,P.A)(w,[["render",C]]);var E=$}}]);
//# sourceMappingURL=897.05983804.js.map