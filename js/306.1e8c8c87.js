"use strict";(self["webpackChunkfinal_hw"]=self["webpackChunkfinal_hw"]||[]).push([[306],{7649:function(t,a,e){e(4114);var s=e(4445),i=e(1250),n=e(9325),o=e(8465),l=e.n(o),r=e(9040);const c=(0,r.A)();a.A=(0,s.nY)("cart",{state:()=>({cart:{},cartLength:"",couponWarning:"",btnLoading:"",isLoading:!1}),actions:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/cms67/cart";i.A.get(t).then((t=>{this.isLoading=!1,this.cart=t.data.data,this.cartLength=this.cart.carts.length})).catch((()=>{this.isLoading=!1,c.pushMessage({style:"danger",title:"購物車取得失敗"})}))},updateCart(t,a){this.isLoading=!0;let e=a;e>20?e=20:e<1&&(e=1);const s=`https://vue3-course-api.hexschool.io/api/cms67/cart/${t.id}`,n={product_id:t.product_id,qty:e};i.A.put(s,{data:n}).then((()=>{this.getCart()})).catch((()=>{c.pushMessage({style:"danger",title:"數量修改失敗"})}))},addtoCart(t,a=1){let e;this.btnLoading=t.id,this.cart.carts?e=this.cart.carts.filter((a=>a.product_id===t.id)):this.getCart();const s="https://vue3-course-api.hexschool.io/api/cms67/cart",n={product_id:t.id,qty:a};i.A.post(s,{data:n}).then((t=>{this.btnLoading="";const{title:a}=t.data.data.product;if(t.data.data.qty>20){const t="已加入到最大數量";c.pushMessage({style:"warning",title:t,content:`購物車內目前已有20件${a}`}),this.updateCart(e[0],20)}else{const t="加入成功";c.pushMessage({style:"success",title:t,content:`已將${a}加入購物車`}),this.getCart()}})).catch((()=>{this.btnLoading="",c.pushMessage({style:"danger",title:"購物車加入失敗"})}))},deleteCartItem(t){this.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/api/cms67/cart/${t.id}`;i.A.delete(a).then((()=>{this.getCart();const a="已移除品項";c.pushMessage({style:"danger",title:a,content:`已將${t.product.title}移除`})})).catch((()=>{this.isLoading=!1,c.pushMessage({style:"danger",title:"購物車刪除失敗"})}))},confirmDeleteAll(){l().fire({text:"確定要將清空購物車嗎",icon:"warning",cancelButtonText:"取消",confirmButtonText:"確定",showCancelButton:!0}).then((t=>{t.isConfirmed&&this.deleteAll()}))},deleteAll(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/cms67/carts";i.A.delete(t).then((()=>{this.getCart();const t="已移除全部品項";c.pushMessage({style:"danger",title:t,content:"已將全部品項移除"})})).catch((()=>{this.isLoading=!1,c.pushMessage({style:"danger",title:"購物車刪除失敗"})}))},addCouponCode(t){this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/api/cms67/coupon",e={code:t};i.A.post(a,{data:e}).then((t=>{t.data.success?(this.getCart(),this.couponWarning=""):(this.isLoading=!1,this.couponWarning="找不到優惠券")})).catch((()=>{this.isLoading=!1,c.pushMessage({style:"danger",title:"優惠券加入失敗"})}))},returnPage(){n.A.go(-1)},returnIndex(){n.A.push("/index")},gotoShop(){n.A.push("/productsList")}}})},5491:function(t,a,e){e(4114);var s=e(4445),i=e(8465),n=e.n(i),o=e(9040);const l=(0,o.A)();a.A=(0,s.nY)("favorite",{state:()=>({favorited:JSON.parse(localStorage.getItem("favorite"))||[]}),actions:{delFav(t){const a=[];this.favorited.forEach((t=>{a.push(t.id)})),this.favorited.splice(a.indexOf(t.id),1),localStorage.setItem("favorite",JSON.stringify(this.favorited));const e="已移除收藏";l.pushMessage({style:"danger",title:e,content:`已將${t.title}移除收藏`})},confirmClearAll(){n().fire({text:"確定要將清空收藏嗎",icon:"warning",cancelButtonText:"取消",confirmButtonText:"確定",showCancelButton:!0}).then((t=>{t.isConfirmed&&this.clearAllFav()}))},clearAllFav(){this.favorited=[],localStorage.setItem("favorite",JSON.stringify(this.favorited));const t="已移除收藏";l.pushMessage({style:"danger",title:t,content:"已將全部商品移除收藏"})},setFav(t){if(this.favorited.length){const a=[];this.favorited.forEach((t=>{a.push(t.id)})),a.includes(t.id)?this.favorited.splice(a.indexOf(t.id),1):this.favorited.push(t)}else this.favorited.push(t);localStorage.setItem("favorite",JSON.stringify(this.favorited))},favState(t){const a=[];return this.favorited.forEach((t=>{a.push(t.id)})),a.includes(t.id)?"fa-solid fa-heart":"fa-regular fa-heart"}}})},246:function(t,a,e){e.r(a),e.d(a,{default:function(){return lt}});var s=e(641);const i={class:"user-view"};function n(t,a,e,n,o,l){const r=(0,s.g2)("UserNavbar"),c=(0,s.g2)("router-view"),d=(0,s.g2)("UserFooter"),h=(0,s.g2)("ToastMessages");return(0,s.uX)(),(0,s.CE)("div",{class:"view-height",onClick:a[0]||(a[0]=(...t)=>l.toggleNav&&l.toggleNav(...t)),onKeydown:a[1]||(a[1]=(...t)=>l.toggleNav&&l.toggleNav(...t))},[(0,s.bF)(r,{ref:"UserNavbar"},null,512),(0,s.Lk)("div",i,[(0,s.bF)(c)]),(0,s.bF)(d),(0,s.bF)(h)],32)}var o=e(33),l=e.p+"img/logo.3209a92e.avif";const r={class:"container","data-name":"nav"},c=(0,s.Lk)("img",{src:l,alt:"logo",width:"30px",height:"30px"},null,-1),d={class:"navbar-toggler border-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",ref:"navToggleBtn","data-name":"nav"},h=(0,s.Lk)("span",{class:"navbar-toggler-icon","data-name":"nav"},null,-1),g=[h],u={class:"collapse navbar-collapse",id:"navbarNav"},v={class:"navbar-nav ms-auto"},p={class:"nav-item mx-1"},f={class:"nav-item mx-1"},m={class:"nav-item mx-1"},b={class:"nav-item mx-1"},k=(0,s.Lk)("i",{class:"fa-solid fa-heart fs-4"},null,-1),L={key:0,class:"icon-num bg-secondary text-dark rounded-circle position-absolute d-inline-block text-center fw-bold"},x={class:"nav-item mx-1"},C=(0,s.Lk)("i",{class:"fa-solid fa-cart-shopping fs-4"},null,-1),A={key:0,class:"icon-num bg-secondary text-dark rounded-circle position-absolute d-inline-block text-center fw-bold"};function w(t,a,e,i,n,l){const h=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",{class:(0,o.C4)(["navbar navbar-expand-lg navbar-light bg-white fixed-top border-bottom border-1 border-info nav-transition",{navAnimated:n.scrollNum}]),"data-name":"nav"},[(0,s.Lk)("div",r,[(0,s.bF)(h,{class:"navbar-brand nav-item fw-semibold",to:"/","data-name":"nav"},{default:(0,s.k6)((()=>[c,(0,s.eW)(" 花花世界")])),_:1}),(0,s.Lk)("button",d,g,512),(0,s.Lk)("div",u,[(0,s.Lk)("ul",v,[(0,s.Lk)("li",p,[(0,s.bF)(h,{class:"nav-link",to:"/productsList","data-name":"nav"},{default:(0,s.k6)((()=>[(0,s.eW)(" 產品列表 ")])),_:1})]),(0,s.Lk)("li",f,[(0,s.bF)(h,{class:"nav-link",to:"/articlesList","data-name":"nav"},{default:(0,s.k6)((()=>[(0,s.eW)(" 最新消息 ")])),_:1})]),(0,s.Lk)("li",m,[(0,s.bF)(h,{class:"nav-link",to:"/inquire","data-name":"nav"},{default:(0,s.k6)((()=>[(0,s.eW)(" 訂單查詢 ")])),_:1})]),(0,s.Lk)("li",b,[(0,s.bF)(h,{class:"nav-link position-relative","data-name":"nav",to:"/favorite"},{default:(0,s.k6)((()=>[k,t.favorited.length?((0,s.uX)(),(0,s.CE)("span",L,(0,o.v_)(t.favorited.length),1)):(0,s.Q3)("",!0)])),_:1})]),(0,s.Lk)("li",x,[(0,s.bF)(h,{class:"nav-link position-relative","data-name":"nav",to:"/cart"},{default:(0,s.k6)((()=>[C,t.cartLength?((0,s.uX)(),(0,s.CE)("span",A,(0,o.v_)(t.cartLength),1)):(0,s.Q3)("",!0)])),_:1})])])])])],2)}var y=e(8647),N=e.n(y),F=e(7649),M=e(5491),_=e(4445),E={data(){return{scrollNum:"",bsCollapse:{}}},computed:{...(0,_.aH)(F.A,["cartLength"]),...(0,_.aH)(M.A,["favorited"])},methods:{...(0,_.i0)(F.A,["getCart"]),animated(){this.scrollNum=window.scrollY},hideNav(){this.bsCollapse.hide()}},created(){this.getCart(),window.addEventListener("scroll",this.animated)},mounted(){const t=document.querySelectorAll(".nav-item"),a=document.getElementById("navbarNav");this.bsCollapse=new(N())(a,{toggle:!1}),t.forEach((t=>{t.addEventListener("click",(()=>{this.bsCollapse.hide()}))}))}},S=e(6262);const $=(0,S.A)(E,[["render",w]]);var W=$,B=e(3751);const T={class:"bg-info"},I={class:"container py-5 text-white"},O={class:"row justify-content-between align-items-center g-3"},U=(0,s.Lk)("div",{class:"col-12 col-md-6 d-flex flex-column"},[(0,s.Lk)("ul",{class:"list-unstyled"},[(0,s.Lk)("li",{class:"mb-2"},"0960-999555"),(0,s.Lk)("li",{class:"mb-2"},"huahuaworld@gamil.com"),(0,s.Lk)("li",null,"台中市南區花花路1號")])],-1),q={class:"col-12 col-md-6"},X={class:"row flex-column"},D={class:"col-12 fs-3 text-center text-md-end mb-3"},J=(0,s.Lk)("i",{class:"bi bi-line mx-3"},null,-1),Y=(0,s.Lk)("span",{class:"d-none"},"1",-1),H=[J,Y],Q=(0,s.Lk)("i",{class:"bi bi-facebook mx-3"},null,-1),j=(0,s.Lk)("span",{class:"d-none"},"1",-1),K=[Q,j],P=(0,s.Lk)("i",{class:"bi bi-instagram mx-3"},null,-1),z=(0,s.Lk)("span",{class:"d-none"},"1",-1),G=[P,z],R={class:"col-12"},V={class:"text-center text-md-end"};function Z(t,a){const e=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("footer",T,[(0,s.Lk)("div",I,[(0,s.Lk)("div",O,[U,(0,s.Lk)("div",q,[(0,s.Lk)("div",X,[(0,s.Lk)("div",D,[(0,s.Lk)("a",{onClick:a[0]||(a[0]=(0,B.D$)((()=>{}),["prevent"])),href:"#",class:"link-light"},H),(0,s.Lk)("a",{onClick:a[1]||(a[1]=(0,B.D$)((()=>{}),["prevent"])),href:"#",class:"link-light"},K),(0,s.Lk)("a",{onClick:a[2]||(a[2]=(0,B.D$)((()=>{}),["prevent"])),href:"#",class:"link-light"},G)]),(0,s.Lk)("div",R,[(0,s.Lk)("div",V,[(0,s.eW)(" ⓒ 2024 huahuaworld All rights reserved. 練習用無商業用途 | "),(0,s.bF)(e,{to:"/login",class:"link-light"},{default:(0,s.k6)((()=>[(0,s.eW)(" 後台登入 ")])),_:1})])])])])])])])}const tt={},at=(0,S.A)(tt,[["render",Z]]);var et=at,st=e(2476),it=e(9040),nt={components:{UserNavbar:W,UserFooter:et,ToastMessages:st.A},methods:{toggleNav(t){"nav"!==t.target.dataset.name&&this.$refs.UserNavbar.hideNav()},...(0,_.i0)(it.A,["clearMessage"])},created(){this.clearMessage()}};const ot=(0,S.A)(nt,[["render",n]]);var lt=ot}}]);
//# sourceMappingURL=306.1e8c8c87.js.map