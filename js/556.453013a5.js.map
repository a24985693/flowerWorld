{"version":3,"file":"js/556.453013a5.js","mappings":"sLAMA,MAAMA,GAAQC,EAAAA,EAAAA,KAEd,KAAeC,EAAAA,EAAAA,IAAY,OAAQ,CACjCC,MAAOA,KAAA,CACLC,KAAM,CAAC,EACPC,WAAY,GACZC,cAAe,GACfC,WAAY,GACZC,WAAW,IAEbC,QAAS,CAEPC,OAAAA,GACEC,KAAKH,WAAY,EACjB,MAAMI,EAAO,sDAEbC,EAAAA,EAAMC,IAAIF,GACPG,MAAMC,IACLL,KAAKH,WAAY,EACjBG,KAAKP,KAAOY,EAAIC,KAAKA,KACrBN,KAAKN,WAAaM,KAAKP,KAAKc,MAAMC,MAAM,IAEzCC,OAAM,KACLT,KAAKH,WAAY,EACjBR,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,WACP,GAER,EAEAC,UAAAA,CAAWC,EAAMC,GACff,KAAKH,WAAY,EACjB,IAAImB,EAAWD,EACXC,EAAW,GACbA,EAAW,GACFA,EAAW,IACpBA,EAAW,GAGb,MAAMf,EAAO,uDAAiEa,EAAKG,KAC7ExB,EAAO,CACXyB,WAAYJ,EAAKI,WACjBC,IAAKH,GAGPd,EAAAA,EAAMkB,IAAInB,EAAK,CAAEK,KAAMb,IACpBW,MAAK,KACJJ,KAAKD,SAAS,IAEfU,OAAM,KACLpB,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,UACP,GAER,EAEAS,SAAAA,CAAUP,EAAME,EAAW,GAIzB,IAAIM,EAHJtB,KAAKJ,WAAakB,EAAKG,GAIlBjB,KAAKP,KAAKc,MAIbe,EAAkBtB,KAAKP,KAAKc,MAAMgB,QAAQC,GAAMA,EAAEN,aAAeJ,EAAKG,KAHtEjB,KAAKD,UAMP,MAAME,EAAO,sDACPR,EAAO,CACXyB,WAAYJ,EAAKG,GACjBE,IAAKH,GAGPd,EAAAA,EAAMuB,KAAKxB,EAAK,CAAEK,KAAMb,IACrBW,MAAMC,IACLL,KAAKJ,WAAa,GAClB,MAAM,MAAEgB,GAAUP,EAAIC,KAAKA,KAAKoB,QAEhC,GAAIrB,EAAIC,KAAKA,KAAKa,IAAM,GAAI,CAC1B,MAAMQ,EAAe,WACrBtC,EAAMqB,YAAY,CAChBC,MAAO,UACPC,MAAOe,EACPC,QAAU,cAAahB,MAEzBZ,KAAKa,WAAWS,EAAgB,GAAI,GACtC,KAAO,CACL,MAAMK,EAAe,OACrBtC,EAAMqB,YAAY,CAChBC,MAAO,UACPC,MAAOe,EACPC,QAAU,KAAIhB,WAEhBZ,KAAKD,SACP,KAEDU,OAAM,KACLT,KAAKJ,WAAa,GAClBP,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,WACP,GAER,EAEAiB,cAAAA,CAAef,GACbd,KAAKH,WAAY,EACjB,MAAMI,EAAO,uDAAiEa,EAAKG,KAEnFf,EAAAA,EAAM4B,OAAO7B,GACVG,MAAK,KACJJ,KAAKD,UACL,MAAM4B,EAAe,QACrBtC,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAOe,EACPC,QAAU,KAAId,EAAKY,QAAQd,WAC3B,IAEHH,OAAM,KACLT,KAAKH,WAAY,EACjBR,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,WACP,GAER,EAEAmB,gBAAAA,GACEC,IAAAA,KAAU,CACRC,KAAM,aACNC,KAAM,UACNC,iBAAkB,KAClBC,kBAAmB,KACnBC,kBAAkB,IACjBjC,MAAMC,IACHA,EAAIiC,aACNtC,KAAKuC,WACP,GAEJ,EAEAA,SAAAA,GACEvC,KAAKH,WAAY,EACjB,MAAMI,EAAO,uDAEbC,EAAAA,EAAM4B,OAAO7B,GACVG,MAAK,KACJJ,KAAKD,UACL,MAAM4B,EAAe,UACrBtC,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAOe,EACPC,QAAS,YACT,IAEHnB,OAAM,KACLT,KAAKH,WAAY,EACjBR,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,WACP,GAER,EAEA4B,aAAAA,CAAcC,GACZzC,KAAKH,WAAY,EACjB,MAAMI,EAAO,wDACPyC,EAAW,CAAEC,KAAMF,GAEzBvC,EAAAA,EAAMuB,KAAKxB,EAAK,CAAEK,KAAMoC,IACrBtC,MAAMC,IACDA,EAAIC,KAAKsC,SACX5C,KAAKD,UACLC,KAAKL,cAAgB,KAErBK,KAAKH,WAAY,EACjBG,KAAKL,cAAgB,SACvB,IAEDc,OAAM,KACLT,KAAKH,WAAY,EACjBR,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,WACP,GAER,EAEAiC,UAAAA,GACEC,EAAAA,EAAOC,IAAI,EACb,EAEAC,WAAAA,GACEF,EAAAA,EAAOG,KAAK,SACd,EAEAC,QAAAA,GACEJ,EAAAA,EAAOG,KAAK,gBACd,I,8FC1MJ,MAAM5D,GAAQC,EAAAA,EAAAA,KAEd,KAAeC,EAAAA,EAAAA,IAAY,QAAS,CAClCC,MAAOA,KAAA,CACLiD,WAAY,GACZU,MAAO,CACLC,KAAM,CAAC,GAETC,cAAe,EACfC,YAAa,CAAC,EACdC,QAAS,GACT1D,WAAW,IAEbC,QAAS,CAEP0D,WAAAA,CAAY1C,GACVd,KAAKH,WAAY,EACjB,MAAMI,EAAO,uDAEbC,EAAAA,EAAMuB,KAAKxB,EAAK,CAAEK,KAAMQ,IACrBV,MAAMC,IACLL,KAAKH,WAAY,EACjBiD,EAAAA,EAAOG,KAAM,aAAY5C,EAAIC,KAAKmD,UAAU,IAE7ChD,OAAM,KACLT,KAAKH,WAAY,EACjBR,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,UACP,GAER,EAEA8C,kBAAAA,CAAmB5C,GACjBkB,IAAAA,KAAU,CACRpB,MAAO,SACPqB,KAAM,gBACNC,KAAM,UACNC,iBAAkB,KAClBC,kBAAmB,KACnBC,kBAAkB,IACjBjC,MAAMC,IACHA,EAAIiC,aACNtC,KAAKwD,YAAY1C,EACnB,GAEJ,EAEA6C,QAAAA,CAAS1C,EAAI2C,GAGX,GAFA5D,KAAKH,WAAY,EAEboB,EAAI,CACN,MAAMhB,EAAO,wDAAkEgB,IAC/Ef,EAAAA,EAAMC,IAAIF,GACPG,MAAMC,IAEL,GADAL,KAAKH,WAAY,EACbQ,EAAIC,KAAK6C,MAAO,CAEdS,EACF5D,KAAKsD,YAAcjD,EAAIC,KAAK6C,MAE5BnD,KAAKmD,MAAQ9C,EAAIC,KAAK6C,MAGxB,MAAMU,EAAMC,OAAOC,KAAK1D,EAAIC,KAAK6C,MAAMa,UAAU,GAC3CC,EAAa5D,EAAIC,KAAK6C,MAAMa,SAASH,GACvCI,EAAWC,SACblE,KAAKyC,WAAawB,EAAWC,OAAOvB,KAExC,MACE3C,KAAKuD,QAAU,iBAEjBvD,KAAKmE,iBAAiB9D,EAAIC,KAAK6C,MAAM,IAEtC1C,OAAM,KACLT,KAAKH,WAAY,EACjBR,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,UACP,GAER,MACEZ,KAAKH,WAAY,EACjBG,KAAKuD,QAAU,kBAEnB,EACAY,gBAAAA,CAAiBhB,GACf,MAAMiB,EAAQN,OAAOO,OAAOlB,EAAMa,UAAUM,KAAKxD,GAASA,EAAKyD,QAC/DvE,KAAKqD,cAAgB,EACrBe,EAAMI,SAAS1D,IACbd,KAAKqD,eAAiBvC,CAAI,GAE9B,EAEA2D,QAAAA,GACEzE,KAAKH,WAAY,EACjB,MAAMI,EAAO,sDAAgED,KAAKmD,MAAMlC,KAExFf,EAAAA,EAAMuB,KAAKxB,GACRG,MAAMC,IAEL,GADAL,KAAKH,WAAY,EACbQ,EAAIC,KAAKsC,QAAS,CACpB5C,KAAK2D,SAAS3D,KAAKmD,MAAMlC,IACzB,MAAMU,EAAe,OACrBtC,EAAMqB,YAAY,CAChBC,MAAO,UACPC,MAAOe,EACPC,QAAS,SAEb,KAEDnB,OAAM,KACLT,KAAKH,WAAY,EACjBR,EAAMqB,YAAY,CAChBC,MAAO,SACPC,MAAO,QACP,GAER,EACA8D,OAAAA,CAAQzD,GACN6B,EAAAA,EAAOG,KAAM,aAAYhC,IAC3B,I,mGC7HO0D,MAAM,c,GACbC,EAAAA,EAAAA,IAAW,UAAP,MAAE,G,GACD,aAAW,c,GACVD,MAAM,4C,GACJA,MAAM,mB,GAKVC,EAAAA,EAAAA,IAEK,MAFDD,MAAM,0BAAyB,QAEnC,G,GAIDA,MAAM,a,GAjBbE,EAAAA,EAAAA,IAAA,2X,GAAAhB,IAAA,EAsCSc,MAAM,W,GACJA,MAAM,mB,GACJA,MAAM,+B,GACTC,EAAAA,EAAAA,IAEM,OAFDD,MAAM,kDAAiD,UAE5D,G,GACKA,MAAM,a,GACJA,MAAM,0B,GACTC,EAAAA,EAAAA,IAAmD,OAA9CD,MAAM,+BAA8B,QAAI,G,GACxCA,MAAM,mB,GAERA,MAAM,0B,GACTC,EAAAA,EAAAA,IAAoD,OAA/CD,MAAM,+BAA8B,SAAK,G,GACzCA,MAAM,mB,GAERA,MAAM,0B,GACTC,EAAAA,EAAAA,IAAoD,OAA/CD,MAAM,+BAA8B,SAAK,G,GACzCA,MAAM,mB,GAERA,MAAM,0B,GACTC,EAAAA,EAAAA,IAAoD,OAA/CD,MAAM,+BAA8B,SAAK,G,GACzCA,MAAM,mB,GAERA,MAAM,0B,GACTC,EAAAA,EAAAA,IAAoD,OAA/CD,MAAM,+BAA8B,SAAK,G,GACzCA,MAAM,mB,GAERA,MAAM,0B,GACTC,EAAAA,EAAAA,IAAiD,OAA5CD,MAAM,+BAA8B,MAAE,G,GACtCA,MAAM,mB,GAERA,MAAM,+B,GACTC,EAAAA,EAAAA,IAAmD,OAA9CD,MAAM,+BAA8B,QAAI,G,GACxCA,MAAM,mB,GAvEzBd,IAAA,EAwE4Cc,MAAM,e,GAxElDd,IAAA,EAyE6Bc,MAAM,gB,GAzEnCd,IAAA,EA4EiBc,MAAM,+B,GACTC,EAAAA,EAAAA,IAIM,OAJDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAAkD,KAA/CD,MAAM,2CACTC,EAAAA,EAAAA,IAAyC,QAAnCD,MAAM,eAAe,YAC3BC,EAAAA,EAAAA,IAAyB,SAAtB,wBAAkB,G,GAHvBE,G,GASHH,MAAM,mB,GACJA,MAAM,+B,GACTC,EAAAA,EAAAA,IAEM,OAFDD,MAAM,kDAAiD,UAE5D,G,GACKA,MAAM,a,GAGJA,MAAM,S,GACNA,MAAM,qB,GACNA,MAAM,kB,GAINA,MAAM,Q,GACJA,MAAM,uC,GACTC,EAAAA,EAAAA,IAAS,SAAN,MAAE,G,IAtGrBf,IAAA,EA0GgBc,MAAM,kD,IACNC,EAAAA,EAAAA,IAAS,SAAN,MAAE,G,IA3GrBf,IAAA,EA+GgBc,MAAM,kD,IACNC,EAAAA,EAAAA,IAAa,SAAV,UAAM,G,IAIbA,EAAAA,EAAAA,IAAI,mB,IACCD,MAAM,wD,IACTC,EAAAA,EAAAA,IAAS,SAAN,MAAE,G,IAtHnBf,IAAA,EAiISc,MAAM,oE,IAEJA,MAAM,sB,IACTC,EAAAA,EAAAA,IAA6D,KAA1DD,MAAM,oDAAkD,S,IAC3DC,EAAAA,EAAAA,IAA0B,MAAtBD,MAAM,QAAO,QAAI,G,IAChBA,MAAM,Q,IACTC,EAAAA,EAAAA,IAAkB,YAAZ,SAAK,G,IAGTA,EAAAA,EAAAA,IAA6B,KAA1BD,MAAM,oBAAkB,S,IAA3BI,I,IAGJH,EAAAA,EAAAA,IAAoC,SAAjC,iCAA6B,G,IAE7BD,MAAM,sB,4GA/IjBK,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,OACEC,EAAAA,EAAAA,IAAqCC,GAAA,CAApBC,OAAQC,EAAAxF,WAAS,oBAClC+E,EAAAA,EAAAA,IAcU,UAdVU,EAcU,CAbRC,GACAX,EAAAA,EAAAA,IAWM,MAXNY,EAWM,EAVJZ,EAAAA,EAAAA,IASK,KATLa,EASK,EARHb,EAAAA,EAAAA,IAIK,KAJLc,EAIK,EAHHR,EAAAA,EAAAA,IAEcS,GAAA,CAFDC,GAAG,IAAIjB,MAAM,mC,CAPpCkB,SAAAC,EAAAA,EAAAA,KAOsE,IAE5D,EATVC,EAAAA,EAAAA,IAOsE,WAPtEC,EAAA,MAWQC,SAMNrB,EAAAA,EAAAA,IAyIM,MAzINsB,EAyIM,CAxIJC,EAoB4Bd,EAAAlC,MAAMiD,UAsF1B,WAKRpB,EAAAA,EAAAA,IAwBM,MAxBNqB,GAwBM,EAtBJzB,EAAAA,EAAAA,IAWM,MAXN0B,GAWM,CAVJC,GACAC,IACA5B,EAAAA,EAAAA,IAMM,MANN6B,GAMM,CALJC,IACA9B,EAAAA,EAAAA,IAAyC,QAAnC+B,IAAI,YAASC,EAAAA,EAAAA,IAAIvB,EAAAlC,MAAMlC,IAAE,MAC/B2D,EAAAA,EAAAA,IAES,UAFDD,MAAM,gBAAiBkC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,GAAAC,aAAAD,GAAAC,eAAAF,IAAaJ,IAAI,WAzIjEO,GAAA,OA6IQC,MAEFvC,EAAAA,EAAAA,IASM,MATNwC,GASM,EARJxC,EAAAA,EAAAA,IAGS,UAHDD,MAAM,4BACXkC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAE1B,EAAArC,aAAAqC,EAAArC,eAAA+D,KAAa,WAGvBnC,EAAAA,EAAAA,IAGS,UAHDD,MAAM,yBACXkC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAE1B,EAAAnC,UAAAmC,EAAAnC,YAAA6D,KAAU,iBA/GiB,WAAzC/B,EAAAA,EAAAA,IA0FM,MA1FNqC,EA0FM,EAzFJzC,EAAAA,EAAAA,IA8CM,MA9CN0C,EA8CM,EA7CJ1C,EAAAA,EAAAA,IA4CM,MA5CN2C,EA4CM,CA3CJC,GAGA5C,EAAAA,EAAAA,IAuCM,MAvCN6C,EAuCM,EAtCJ7C,EAAAA,EAAAA,IAGM,MAHN8C,EAGM,CAFJC,GACA/C,EAAAA,EAAAA,IAAiD,MAAjDgD,GAAiDhB,EAAAA,EAAAA,IAAjBvB,EAAAlC,MAAMlC,IAAE,MAE1C2D,EAAAA,EAAAA,IAGM,MAHNiD,EAGM,CAFJC,GACAlD,EAAAA,EAAAA,IAAyD,MAAzDmD,GAAyDnB,EAAAA,EAAAA,IAAzBvB,EAAAlC,MAAMC,KAAK4E,OAAK,MAElDpD,EAAAA,EAAAA,IAGM,MAHNqD,EAGM,CAFJC,GACAtD,EAAAA,EAAAA,IAAwD,MAAxDuD,GAAwDvB,EAAAA,EAAAA,IAAxBvB,EAAAlC,MAAMC,KAAKgF,MAAI,MAEjDxD,EAAAA,EAAAA,IAGM,MAHNyD,EAGM,CAFJC,GACA1D,EAAAA,EAAAA,IAAuD,MAAvD2D,GAAuD3B,EAAAA,EAAAA,IAAvBvB,EAAAlC,MAAMC,KAAKoF,KAAG,MAEhD5D,EAAAA,EAAAA,IAGM,MAHN6D,EAGM,CAFJC,GACA9D,EAAAA,EAAAA,IAA2D,MAA3D+D,GAA2D/B,EAAAA,EAAAA,IAA3BvB,EAAAlC,MAAMC,KAAKwF,SAAO,MAEpDhE,EAAAA,EAAAA,IAGM,MAHNiE,EAGM,CAFJC,GACAlE,EAAAA,EAAAA,IAAsD,MAAtDmE,GAAsDnC,EAAAA,EAAAA,IAAtBvB,EAAAlC,MAAM6F,SAAO,MAE/CpE,EAAAA,EAAAA,IAMM,MANNqE,EAMM,CALJC,GACAtE,EAAAA,EAAAA,IAGM,MAHNuE,EAGM,CAFS9D,EAAAlC,MAAMiD,UAAiC,WACpDpB,EAAAA,EAAAA,IAA6C,OAA7CoE,EAAkC,WADR,WAA1BpE,EAAAA,EAAAA,IAA2D,OAA3DqE,EAAgD,aAIJhE,EAAAlC,MAAMiD,SA5ElEkD,EAAAA,EAAAA,IAAA,SA4EyE,WAA7DtE,EAAAA,EAAAA,IAMM,MANNuE,EA5EZC,WAsFM5E,EAAAA,EAAAA,IAyCM,MAzCN6E,EAyCM,EAxCJ7E,EAAAA,EAAAA,IAuCM,MAvCN8E,EAuCM,CAtCJC,GAGA/E,EAAAA,EAAAA,IAkCM,MAlCNgF,EAkCM,gBAjCJ5E,EAAAA,EAAAA,IAOMC,EAAAA,GAAA,MAnGlB4E,EAAAA,EAAAA,IA4FgCxE,EAAAlC,MAAMa,UAAdlD,K,WAAZkE,EAAAA,EAAAA,IAOM,OAP+BnB,IAAK/C,EAAKG,GAC7C0D,MAAM,iD,EACNC,EAAAA,EAAAA,IAA6C,IAA7CkF,GAA6ClD,EAAAA,EAAAA,IAAzB9F,EAAKY,QAAQd,OAAK,IACtCgE,EAAAA,EAAAA,IAAgD,IAAhDmF,EAA6B,KAACnD,EAAAA,EAAAA,IAAG9F,EAAKK,KAAG,IACzCyD,EAAAA,EAAAA,IAEI,IAFJoF,EAA0B,QACrBpD,EAAAA,EAAAA,IAAGvB,EAAA4E,SAASC,SAASpJ,EAAKyD,QAAK,Q,OAGtCK,EAAAA,EAAAA,IAeM,MAfNuF,EAeM,EAdJvF,EAAAA,EAAAA,IAGM,MAHNwF,EAGM,CAFJC,GACAzF,EAAAA,EAAAA,IAA0B,UAAAgC,EAAAA,EAAAA,IAApBvB,EAAAhC,eAAa,KAEVgC,EAAA5C,aAAU,WAArBuC,EAAAA,EAAAA,IAIM,MAJNsF,GAIM,CAFJC,IACA3F,EAAAA,EAAAA,IAAwC,UAAAgC,EAAAA,EAAAA,IAAlCvB,EAAAhC,cAAgBgC,EAAAlC,MAAMoB,OAAK,OA5GjD+E,EAAAA,EAAAA,IAAA,OA8GyBjE,EAAA5C,aAAU,WAArBuC,EAAAA,EAAAA,IAIM,MAJNwF,GAIM,CAFJC,IACA7F,EAAAA,EAAAA,IAAuB,UAAAgC,EAAAA,EAAAA,IAAjBvB,EAAA5C,YAAU,OAjHhC6G,EAAAA,EAAAA,IAAA,SAoHYoB,IACA9F,EAAAA,EAAAA,IAGM,MAHN+F,GAGM,CAFJC,IACAhG,EAAAA,EAAAA,IAA8C,SAA3C,OAAGgC,EAAAA,EAAAA,IAAGvB,EAAA4E,SAASC,SAAS7E,EAAAlC,MAAMoB,QAAK,MAExCK,EAAAA,EAAAA,IAGS,UAHDiG,KAAK,SAASlG,MAAM,kCACzBkC,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAE1B,EAAAZ,UAAAY,EAAAZ,YAAAsC,KAAU,sBA6BxB,G,iDAYR,IACE+D,SAAU,KACLC,EAAAA,GAAAA,IAASC,GAAAA,EAAY,CAAC,aAAc,QAAS,YAAa,mBAE/DC,QAAS,KACJC,EAAAA,GAAAA,IAAWC,GAAAA,EAAW,CAAC,cAAe,iBACtCD,EAAAA,GAAAA,IAAWF,GAAAA,EAAY,CAAC,WAAY,iBACpCE,EAAAA,GAAAA,IAAW5L,GAAAA,EAAY,CAAC,gBAC3B2H,WAAAA,GACEmE,UAAUC,UAAUC,UAAUtL,KAAKuL,MAAM9H,QAAQ+H,aACjD,MAAM7J,EAAe,OACrB3B,KAAKU,YAAY,CACfC,MAAO,UACPC,MAAOe,EACPC,QAAS,OAEb,GAEF6J,OAAAA,GACEzL,KAAK2D,SAAS3D,KAAK0L,OAAOC,OAAOlI,QACnC,G,WClLF,MAAMmI,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAASC,MAEpE,S","sources":["webpack://final-hw/./src/stores/cartStore.js","webpack://final-hw/./src/stores/orderStore.js","webpack://final-hw/./src/views/frontend/UserCheckout.vue","webpack://final-hw/./src/views/frontend/UserCheckout.vue?9c09"],"sourcesContent":["import { defineStore } from 'pinia';\nimport axios from 'axios';\nimport router from '@/router';\nimport Swal from 'sweetalert2';\nimport toastStore from './toastStore';\n\nconst toast = toastStore();\n\nexport default defineStore('cart', {\n  state: () => ({\n    cart: {},\n    cartLength: '',\n    couponWarning: '',\n    btnLoading: '',\n    isLoading: false,\n  }),\n  actions: {\n    // 取得購物車列表\n    getCart() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n\n      axios.get(url)\n        .then((res) => {\n          this.isLoading = false;\n          this.cart = res.data.data;\n          this.cartLength = this.cart.carts.length;\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '購物車取得失敗',\n          });\n        });\n    },\n    // 修改購物車數量\n    updateCart(item, num) {\n      this.isLoading = true;\n      let quantity = num;\n      if (quantity > 20) { // 單品項超過20，數量就調整到20\n        quantity = 20;\n      } else if (quantity < 1) { // 單品項低於1，數量就調整到1\n        quantity = 1;\n      }\n\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cart = {\n        product_id: item.product_id,\n        qty: quantity,\n      };\n\n      axios.put(url, { data: cart })\n        .then(() => {\n          this.getCart();\n        })\n        .catch(() => {\n          toast.pushMessage({\n            style: 'danger',\n            title: '數量修改失敗',\n          });\n        });\n    },\n    // 加入購物車\n    addtoCart(item, quantity = 1) {\n      this.btnLoading = item.id;\n\n      // 判斷購物車是否已有存在的商品\n      let existingProduct;\n      if (!this.cart.carts) {\n        this.getCart();\n      } else {\n        // 已有存在購物車的品項\n        existingProduct = this.cart.carts.filter((i) => i.product_id === item.id);\n      }\n\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: item.id,\n        qty: quantity,\n      };\n\n      axios.post(url, { data: cart })\n        .then((res) => {\n          this.btnLoading = '';\n          const { title } = res.data.data.product;\n          // 品項數量超過20，updateCart調整品項數量為20\n          if (res.data.data.qty > 20) {\n            const messageTitle = '已加入到最大數量';\n            toast.pushMessage({\n              style: 'warning',\n              title: messageTitle,\n              content: `購物車內目前已有20件${title}`,\n            });\n            this.updateCart(existingProduct[0], 20);\n          } else {\n            const messageTitle = '加入成功';\n            toast.pushMessage({\n              style: 'success',\n              title: messageTitle,\n              content: `已將${title}加入購物車`,\n            });\n            this.getCart();\n          }\n        })\n        .catch(() => {\n          this.btnLoading = '';\n          toast.pushMessage({\n            style: 'danger',\n            title: '購物車加入失敗',\n          });\n        });\n    },\n    // 刪除單品項\n    deleteCartItem(item) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n\n      axios.delete(url)\n        .then(() => {\n          this.getCart();\n          const messageTitle = '已移除品項';\n          toast.pushMessage({\n            style: 'danger',\n            title: messageTitle,\n            content: `已將${item.product.title}移除`,\n          });\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '購物車刪除失敗',\n          });\n        });\n    },\n    // 確認是否清空購物車\n    confirmDeleteAll() {\n      Swal.fire({\n        text: '確定要將清空購物車嗎',\n        icon: 'warning',\n        cancelButtonText: '取消',\n        confirmButtonText: '確定',\n        showCancelButton: true,\n      }).then((res) => {\n        if (res.isConfirmed) {\n          this.deleteAll();\n        }\n      });\n    },\n    // 清空購物車\n    deleteAll() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`;\n\n      axios.delete(url)\n        .then(() => {\n          this.getCart();\n          const messageTitle = '已移除全部品項';\n          toast.pushMessage({\n            style: 'danger',\n            title: messageTitle,\n            content: '已將全部品項移除',\n          });\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '購物車刪除失敗',\n          });\n        });\n    },\n    // 加入優惠券\n    addCouponCode(couponCode) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const dataCode = { code: couponCode };\n\n      axios.post(url, { data: dataCode })\n        .then((res) => {\n          if (res.data.success) {\n            this.getCart();\n            this.couponWarning = '';\n          } else {\n            this.isLoading = false;\n            this.couponWarning = '找不到優惠券';\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '優惠券加入失敗',\n          });\n        });\n    },\n    // 回上一頁\n    returnPage() {\n      router.go(-1);\n    },\n    // 回首頁\n    returnIndex() {\n      router.push('/index');\n    },\n    // 前往繼續購物\n    gotoShop() {\n      router.push('/productsList');\n    },\n  },\n});\n","import { defineStore } from 'pinia';\nimport axios from 'axios';\nimport router from '@/router';\nimport Swal from 'sweetalert2';\nimport toastStore from './toastStore';\n\nconst toast = toastStore();\n\nexport default defineStore('order', {\n  state: () => ({\n    couponCode: '',\n    order: {\n      user: {},\n    },\n    originalTotal: 0,\n    searchOrder: {},\n    warning: '',\n    isLoading: false,\n  }),\n  actions: {\n    // 建立訂單\n    createOrder(item) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n\n      axios.post(url, { data: item })\n        .then((res) => {\n          this.isLoading = false;\n          router.push(`/checkout/${res.data.orderId}`);\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '訂單建立失敗',\n          });\n        });\n    },\n    // 確認建立訂單\n    confirmCreateOrder(item) {\n      Swal.fire({\n        title: '確定表單資料',\n        text: '表單送出後將不能修改訂單!',\n        icon: 'warning',\n        cancelButtonText: '取消',\n        confirmButtonText: '確定',\n        showCancelButton: true,\n      }).then((res) => {\n        if (res.isConfirmed) {\n          this.createOrder(item);\n        }\n      });\n    },\n    // 取得訂單\n    getOrder(id, search) {\n      this.isLoading = true;\n\n      if (id) { // 如果id不為空\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${id}`;\n        axios.get(url)\n          .then((res) => {\n            this.isLoading = false;\n            if (res.data.order) {\n              // 判斷是搜尋訂單還是取得訂單\n              if (search) {\n                this.searchOrder = res.data.order;\n              } else {\n                this.order = res.data.order;\n              }\n              // 取得優惠券碼\n              const key = Object.keys(res.data.order.products)[0];\n              const productKey = res.data.order.products[key];\n              if (productKey.coupon) {\n                this.couponCode = productKey.coupon.code;\n              }\n            } else {\n              this.warning = '訂單號碼輸入錯誤，請重新輸入';\n            }\n            this.getOriginalTotal(res.data.order);\n          })\n          .catch(() => {\n            this.isLoading = false;\n            toast.pushMessage({\n              style: 'danger',\n              title: '訂單取得失敗',\n            });\n          });\n      } else {\n        this.isLoading = false;\n        this.warning = '訂單號碼不可為空，請輸入訂單號碼';\n      }\n    },\n    getOriginalTotal(order) {\n      const price = Object.values(order.products).map((item) => item.total);\n      this.originalTotal = 0;\n      price.forEach((item) => {\n        this.originalTotal += item;\n      });\n    },\n    // 付款\n    payOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.order.id}`;\n\n      axios.post(url)\n        .then((res) => {\n          this.isLoading = false;\n          if (res.data.success) {\n            this.getOrder(this.order.id);\n            const messageTitle = '付款成功';\n            toast.pushMessage({\n              style: 'success',\n              title: messageTitle,\n              content: '已完成付款',\n            });\n          }\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '付款失敗',\n          });\n        });\n    },\n    gotoPay(id) {\n      router.push(`/checkout/${id}`);\n    },\n  },\n});\n","<template>\n  <LoadingSpinner :active=\"isLoading\"/>\n  <section class=\"page-title\">\n    <h2>付款</h2>\n    <nav aria-label=\"breadcrumb\">\n      <ol class=\"breadcrumb d-flex justify-content-center\">\n        <li class=\"breadcrumb-item\">\n          <router-link to=\"/\" class=\"text-decoration-none text-light\">\n            首頁\n          </router-link>\n        </li>\n        <li class=\"breadcrumb-item active\">\n          付款\n        </li>\n      </ol>\n    </nav>\n  </section>\n  <div class=\"container\">\n    <div class=\"row justify-content-center text-center mb-5\">\n      <div class=\"col-4 col-md-3\">\n        <div class=\"pay-step border\">\n          <span>1</span>\n        </div>\n        <span>確認訂單</span>\n      </div>\n      <div class=\"col-4 col-md-3\">\n        <div class=\"pay-step border\">\n          <span>2</span>\n        </div>\n        <span>填寫資料</span>\n      </div>\n      <div class=\"col-4 col-md-3\">\n        <div class=\"pay-step bg-info text-white\">\n          <span>3</span>\n        </div>\n        <span>付款</span>\n      </div>\n    </div>\n    <div class=\"row g-4\" v-if=\"!order.is_paid\">\n      <div class=\"col-12 col-lg-8\">\n        <div class=\"border border-2 border-info\">\n          <div class=\"w-100 bg-info text-white fs-5 text-center py-2\">\n            訂單明細\n          </div>\n          <div class=\"py-4 px-3\">\n            <div class=\"row border-bottom py-2\">\n              <div class=\"col-12 col-sm-4 fw-semibold\">訂單編號</div>\n              <div class=\"col-12 col-sm-8\">{{ order.id }}</div>\n            </div>\n            <div class=\"row border-bottom py-2\">\n              <div class=\"col-12 col-sm-4 fw-semibold\">Email</div>\n              <div class=\"col-12 col-sm-8\">{{ order.user.email }}</div>\n            </div>\n            <div class=\"row border-bottom py-2\">\n              <div class=\"col-12 col-sm-4 fw-semibold\">收件人姓名</div>\n              <div class=\"col-12 col-sm-8\">{{ order.user.name }}</div>\n            </div>\n            <div class=\"row border-bottom py-2\">\n              <div class=\"col-12 col-sm-4 fw-semibold\">收件人電話</div>\n              <div class=\"col-12 col-sm-8\">{{ order.user.tel }}</div>\n            </div>\n            <div class=\"row border-bottom py-2\">\n              <div class=\"col-12 col-sm-4 fw-semibold\">收件人地址</div>\n              <div class=\"col-12 col-sm-8\">{{ order.user.address }}</div>\n            </div>\n            <div class=\"row border-bottom py-2\">\n              <div class=\"col-12 col-sm-4 fw-semibold\">留言</div>\n              <div class=\"col-12 col-sm-8\">{{ order.message }}</div>\n            </div>\n            <div class=\"row border-bottom py-2 mb-4\">\n              <div class=\"col-12 col-sm-4 fw-semibold\">付款狀態</div>\n              <div class=\"col-12 col-sm-8\">\n                <span v-if=\"!order.is_paid\" class=\"text-danger\">尚未付款</span>\n                <span v-else class=\"text-success\">付款完成</span>\n              </div>\n            </div>\n            <div class=\"row flex-column flex-md-row\" v-if=\"!order.is_paid\">\n              <div class=\"col-12\">\n                <i class=\"fa-solid fa-triangle-exclamation me-2\"/>\n                <span class=\" fw-semibold\">訂單尚未完成!</span>\n                <p>確認訂單內容後，點擊付款即完成訂單!</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-12 col-lg-4\">\n        <div class=\"border border-2 border-info\">\n          <div class=\"w-100 bg-info text-white fs-5 text-center py-2\">\n            訂單明細\n          </div>\n          <div class=\"py-4 px-3\">\n            <div v-for=\"item in order.products\" :key=\"item.id\"\n              class=\"row justify-content-center border-bottom py-2\">\n              <p class=\"col-5\">{{ item.product.title }}</p>\n              <p class=\"col-2 text-center\">x{{ item.qty }}</p>\n              <p class=\"col-5 text-end\">\n                NT${{ $filters.currency(item.total) }}\n              </p>\n            </div>\n            <div class=\"my-3\">\n              <div class=\"d-flex justify-content-between mb-1\">\n                <p>小計</p>\n                <p>{{ originalTotal }}</p>\n              </div>\n              <div v-if=\"couponCode\"\n                class=\"d-flex justify-content-between text-muted mb-1\">\n                <p>折扣</p>\n                <p>{{ originalTotal - order.total }}</p>\n              </div>\n              <div v-if=\"couponCode\"\n                class=\"d-flex justify-content-between text-muted mb-1\">\n                <p>已使用優惠券</p>\n                <p>{{ couponCode }}</p>\n              </div>\n            </div>\n            <hr>\n            <div class=\"d-flex justify-content-between fs-5 fw-semibold mb-3\">\n              <p>總計</p>\n              <p>NT${{ $filters.currency(order.total) }}</p>\n            </div>\n            <button type=\"button\" class=\"btn btn-secondary w-100 fw-bold\"\n              @click=\"payOrder\">\n              確認付款\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row justify-content-center py-5 gy-3\n      border border-2 border-info\" v-else>\n      <div class=\"col-12 text-center\">\n        <i class=\"fa-regular fa-circle-check text-info fs-120 mb-3\"/>\n        <h3 class=\"mb-4\">付款完成</h3>\n        <div class=\"mb-3\">\n          <span>訂單編號：</span>\n          <span ref=\"orderId\">{{ order.id }}</span>\n          <button class=\"btn py-0 fs-5\" @click=\"copyOrderId\" ref=\"copyBtn\">\n            <i class=\"fa-solid fa-copy\"/>\n          </button>\n        </div>\n        <p>感謝您的訂購！您的訂單已成功付款，我們將盡快為您安排配送。</p>\n      </div>\n      <div class=\"col-12 text-center\">\n        <button class=\"btn btn-outline-gray ms-3\"\n          @click=\"returnIndex\">\n          回到首頁\n        </button>\n        <button class=\"btn btn-secondary ms-3\"\n          @click=\"gotoShop\">\n          繼續購物\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport cartStore from '@/stores/cartStore';\nimport orderStore from '@/stores/orderStore';\nimport toastStore from '@/stores/toastStore';\nimport { mapState, mapActions } from 'pinia';\n\nexport default {\n  computed: {\n    ...mapState(orderStore, ['couponCode', 'order', 'isLoading', 'originalTotal']),\n  },\n  methods: {\n    ...mapActions(cartStore, ['returnIndex', 'gotoShop']),\n    ...mapActions(orderStore, ['getOrder', 'payOrder']),\n    ...mapActions(toastStore, ['pushMessage']),\n    copyOrderId() {\n      navigator.clipboard.writeText(this.$refs.orderId.textContent);\n      const messageTitle = '複製成功';\n      this.pushMessage({\n        style: 'success',\n        title: messageTitle,\n        content: '已複製',\n      });\n    },\n  },\n  created() {\n    this.getOrder(this.$route.params.orderId);\n  },\n};\n</script>\n","import { render } from \"./UserCheckout.vue?vue&type=template&id=5f9fb208\"\nimport script from \"./UserCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckout.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["toast","toastStore","defineStore","state","cart","cartLength","couponWarning","btnLoading","isLoading","actions","getCart","this","url","axios","get","then","res","data","carts","length","catch","pushMessage","style","title","updateCart","item","num","quantity","id","product_id","qty","put","addtoCart","existingProduct","filter","i","post","product","messageTitle","content","deleteCartItem","delete","confirmDeleteAll","Swal","text","icon","cancelButtonText","confirmButtonText","showCancelButton","isConfirmed","deleteAll","addCouponCode","couponCode","dataCode","code","success","returnPage","router","go","returnIndex","push","gotoShop","order","user","originalTotal","searchOrder","warning","createOrder","orderId","confirmCreateOrder","getOrder","search","key","Object","keys","products","productKey","coupon","getOriginalTotal","price","values","map","total","forEach","payOrder","gotoPay","class","_createElementVNode","_createStaticVNode","_hoisted_38","_hoisted_63","_createElementBlock","_Fragment","_createVNode","_component_LoadingSpinner","active","_ctx","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_component_router_link","to","default","_withCtx","_createTextVNode","_","_hoisted_6","_hoisted_7","_hoisted_8","is_paid","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","ref","_toDisplayString","onClick","_cache","args","$options","copyOrderId","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","email","_hoisted_20","_hoisted_21","_hoisted_22","name","_hoisted_23","_hoisted_24","_hoisted_25","tel","_hoisted_26","_hoisted_27","_hoisted_28","address","_hoisted_29","_hoisted_30","_hoisted_31","message","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_36","_hoisted_35","_createCommentVNode","_hoisted_37","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_renderList","_hoisted_44","_hoisted_45","_hoisted_46","$filters","currency","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","type","computed","mapState","orderStore","methods","mapActions","cartStore","navigator","clipboard","writeText","$refs","textContent","created","$route","params","__exports__","render"],"sourceRoot":""}