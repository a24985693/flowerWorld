{"version":3,"file":"js/848.1f0d87a1.js","mappings":"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","sources":["webpack://final-hw/./src/stores/articleStore.js","webpack://final-hw/./src/stores/toastStore.js","webpack://final-hw/./src/views/frontend/UserArticle.vue","webpack://final-hw/./src/views/frontend/UserArticle.vue?09f0"],"sourcesContent":["import { defineStore } from 'pinia';\nimport axios from 'axios';\nimport router from '@/router';\nimport toastStore from './toastStore';\n\nconst toast = toastStore();\n\nexport default defineStore('article', {\n  state: () => ({\n    pagination: {},\n    article: {},\n    articles: {},\n    isLoading: false,\n  }),\n  actions: {\n    // 取得單一文章\n    getArticle(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/article/${id}`;\n\n      axios.get(url)\n        .then((res) => {\n          this.isLoading = false;\n          this.article = res.data.article;\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '文章取得失敗',\n          });\n        });\n    },\n    // 取得文章列表\n    getArticles(page = 1) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/articles?page=${page}`;\n\n      axios.get(url)\n        .then((res) => {\n          this.articles = res.data.articles;\n          this.pagination = res.data.pagination;\n          this.articles.forEach((item, i) => {\n            this.getContent(item, i);\n          });\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '文章取得失敗',\n          });\n        });\n    },\n    // 取得文章的content\n    getContent(item, i) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/article/${item.id}`;\n\n      axios.get(url)\n        .then((res) => {\n          this.isLoading = false;\n          this.articles[i].content = res.data.article.content;\n        })\n        .catch(() => {\n          this.isLoading = false;\n          toast.pushMessage({\n            style: 'danger',\n            title: '文章取得失敗',\n          });\n        });\n    },\n    // 到指定文章頁\n    gotoArticle(id) {\n      router.push(`/article/${id}`);\n    },\n  },\n});\n","import { defineStore } from 'pinia';\n\nexport default defineStore('toast', {\n  state: () => ({\n    messages: [],\n  }),\n  actions: {\n    pushMessage(data) {\n      const { style, title, content } = data;\n      this.messages.push({ style, title, content });\n    },\n    clearMessage() {\n      this.messages = [];\n    },\n  },\n});\n","<template>\n  <LoadingSpinner :active=\"isLoading\"/>\n  <div class=\"container article mt-5 pt-3\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-9\">\n        <h2 class=\"text-center mb-4\">{{ article.title }}</h2>\n        <p class=\"text-center mb-4\">\n          {{ $filters.date(article.create_at) }}‧\n          {{ article.author }}\n        </p>\n        <img :src=\"article.image\" alt=\"文章圖片\"\n          class=\"w-100 object-fit-cover mb-4\">\n        <p class=\"content mb-5\">\n          {{ article.content }}\n        </p>\n        <router-link to=\"/articlesList\">回到列表</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport articleStore from '@/stores/articleStore';\nimport { mapState, mapActions } from 'pinia';\n\nexport default {\n  computed: {\n    ...mapState(articleStore, ['article', 'isLoading']),\n  },\n  methods: {\n    ...mapActions(articleStore, ['getArticle']),\n  },\n  created() {\n    this.getArticle(this.$route.params.id);\n  },\n};\n</script>\n","import { render } from \"./UserArticle.vue?vue&type=template&id=2b659b79\"\nimport script from \"./UserArticle.vue?vue&type=script&lang=js\"\nexport * from \"./UserArticle.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["toast","toastStore","defineStore","state","pagination","article","articles","isLoading","actions","getArticle","id","this","url","axios","get","then","res","data","catch","pushMessage","style","title","getArticles","page","forEach","item","i","getContent","content","gotoArticle","router","push","messages","clearMessage","class","_createElementBlock","_Fragment","_createVNode","_component_LoadingSpinner","active","_ctx","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","$filters","date","create_at","author","src","image","alt","_hoisted_6","_hoisted_7","_component_router_link","to","default","_withCtx","_createTextVNode","_","computed","mapState","articleStore","methods","mapActions","created","$route","params","__exports__","render"],"sourceRoot":""}